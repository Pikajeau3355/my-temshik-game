<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>UA Temshik Elite</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap');

:root{
--bg:#0b0c10;
--card:#1c1d26;
--primary:#5d5fef;
--gold:#ffcf52;
--success:#4ade80;
--danger:#f87171;
}

body{
margin:0;
font-family:Manrope,sans-serif;
background:var(--bg);
color:#fff;
height:100vh;
display:flex;
flex-direction:column;
}

.profile-header{
padding:45px 20px 20px;
}

.user-info{
display:flex;
align-items:center;
gap:12px;
}

.avatar{
width:44px;height:44px;
border-radius:14px;
background:var(--primary);
display:flex;
align-items:center;
justify-content:center;
font-weight:800;
}

.balance-card{
margin-top:15px;
background:rgba(255,255,255,0.04);
border-radius:24px;
padding:20px;
border:1px solid rgba(255,255,255,0.08);
}

.bal-label{
font-size:11px;
letter-spacing:1px;
color:#aaa;
font-weight:700;
}

.bal-amount{
font-size:34px;
font-weight:800;
margin:4px 0 10px;
}

.energy-section{
margin-top:10px;
}

.energy-header{
display:flex;
justify-content:space-between;
font-size:11px;
font-weight:700;
}

.bar{
height:8px;
border-radius:8px;
background:rgba(255,255,255,0.1);
overflow:hidden;
margin-top:5px;
}

.bar-inner{
height:100%;
background:linear-gradient(90deg,#00f2ff,var(--primary));
width:100%;
transition:.3s;
}

.viewport{
flex:1;
overflow-y:auto;
padding:20px;
padding-bottom:120px;
}

.section-title{
font-size:12px;
font-weight:800;
color:#777;
margin:20px 0 10px;
}

.card{
background:var(--card);
border-radius:20px;
padding:16px;
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:10px;
border:1px solid rgba(255,255,255,0.04);
}

.card-info h3{
margin:0;
font-size:15px;
}

.card-info p{
margin:4px 0 0;
font-size:12px;
color:#aaa;
}

.btn{
background:var(--primary);
border:none;
color:#fff;
padding:10px 16px;
border-radius:14px;
font-weight:700;
}

.btn:disabled{
opacity:.4;
}

.log{
background:rgba(0,0,0,0.25);
border-radius:16px;
padding:12px;
font-size:11px;
height:110px;
overflow-y:auto;
}

.log-item{
margin-bottom:6px;
padding-left:8px;
border-left:3px solid var(--primary);
}

.nav{
position:fixed;
bottom:20px;
left:20px;
right:20px;
height:70px;
border-radius:24px;
background:rgba(28,29,38,.95);
display:flex;
justify-content:space-around;
align-items:center;
}

.nav-item{
font-size:10px;
font-weight:700;
color:#666;
text-align:center;
}

.nav-item.active{color:var(--primary);}
.nav-icon{font-size:22px;}
</style>
</head>

<body>

<div class="profile-header">
  <div class="user-info">
    <div class="avatar" id="avatar">–¢</div>
    <div>
      <h3 id="name">–¢–µ–º—â–∏–∫</h3>
      <small id="levelName">–ù–æ–≤–∞—á–æ–∫</small>
    </div>
  </div>

  <div class="balance-card">
    <div class="bal-label">–ö–ê–ü–Ü–¢–ê–õ</div>
    <div class="bal-amount" id="money">0 ‚Ç¥</div>

    <div class="energy-section">
      <div class="energy-header">
        <span>–ï–ù–ï–†–ì–Ü–Ø</span><span id="energyVal">100%</span>
      </div>
      <div class="bar"><div class="bar-inner" id="energyBar"></div></div>
    </div>

    <div class="energy-section">
      <div class="energy-header">
        <span>–†–ï–ü–£–¢–ê–¶–Ü–Ø</span><span id="repVal">0</span>
      </div>
      <div class="bar"><div class="bar-inner" id="repBar" style="background:linear-gradient(90deg,#facc15,#f97316)"></div></div>
    </div>
  </div>
</div>

<div class="viewport" id="tab-work">
  <div class="section-title">üöÄ –°–•–ï–ú–ò</div>
  <div id="schemeList"></div>

  <div class="section-title">üìú –ñ–£–†–ù–ê–õ</div>
  <div class="log" id="log"></div>
</div>

<nav class="nav">
  <div class="nav-item active">
    <div class="nav-icon">üí∏</div>–¢–µ–º–∫–∏
  </div>
</nav>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const user = tg.initDataUnsafe?.user;
if(user){
  name.textContent=user.first_name;
  avatar.textContent=user.first_name[0];
}

let state = JSON.parse(localStorage.getItem('state')) || {
  money:1000,
  energy:100,
  rep:10,
  level:0
};

const levels=[
{name:"–ù–æ–≤–∞—á–æ–∫",rep:0},
{name:"–®–Ω–∏—Ä—å",rep:30},
{name:"–ú—É—Ç–Ω–∏–π",rep:80},
{name:"–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç",rep:150},
{name:"–õ–µ–≥–µ–Ω–¥–∞",rep:300}
];

const schemes=[
{id:1,name:"OLX –¥—Ä–æ–ø",cost:200,min:-100,max:300,energy:15,risk:.2,rep:3},
{id:2,name:"–§–µ–π–∫ –º–∞–≥–∞–∑–∏–Ω",cost:3000,min:-1500,max:6000,energy:30,risk:.35,rep:7},
{id:3,name:"–ö—Ä–∏–ø—Ç–æ —Å–∫–∞–º",cost:12000,min:-6000,max:20000,energy:45,risk:.5,rep:12}
];

function save(){
localStorage.setItem('state',JSON.stringify(state));
}

function log(msg,color){
logDiv=document.getElementById('log');
logDiv.insertAdjacentHTML('afterbegin',
`<div class="log-item" style="border-color:${color}">${msg}</div>`);
}

function checkLevel(){
for(let i=levels.length-1;i>=0;i--){
if(state.rep>=levels[i].rep){state.level=i;break;}
}
}

function runScheme(id){
let s=schemes.find(x=>x.id===id);
if(state.energy<s.energy||state.money<s.cost)return;

state.energy-=s.energy;
state.money-=s.cost;

if(Math.random()<s.risk){
state.rep=Math.max(0,state.rep-5);
state.money+=s.cost+s.min;
log(`‚ùå –ö–∏–¥–æ–∫ ${s.min} ‚Ç¥`, 'var(--danger)');
tg.HapticFeedback.notificationOccurred('error');
}else{
let profit=Math.floor(Math.random()*(s.max-s.min+1))+s.min;
state.rep+=s.rep;
state.money+=s.cost+profit;
log(`üí∞ –ü–ª—é—Å ${profit} ‚Ç¥`, 'var(--success)');
tg.HapticFeedback.notificationOccurred('success');
}
checkLevel();
update();
}

function update(){
money.textContent=state.money.toLocaleString()+" ‚Ç¥";
energyVal.textContent=Math.floor(state.energy)+"%";
energyBar.style.width=state.energy+"%";
repVal.textContent=state.rep;
repBar.style.width=Math.min(100,state.rep/3)+"%";
levelName.textContent=levels[state.level].name;

schemeList.innerHTML='';
schemes.forEach(s=>{
schemeList.innerHTML+=`
<div class="card">
<div class="card-info">
<h3>${s.name}</h3>
<p>–†–∏–∑–∏–∫ ${(s.risk*100).toFixed(0)}% | -${s.energy}‚ö°</p>
</div>
<button class="btn"
${state.energy<s.energy||state.money<s.cost?'disabled':''}
onclick="runScheme(${s.id})">–ö—Ä—É—Ç–∏—Ç–∏</button>
</div>`;
});
save();
}

setInterval(()=>{
if(state.energy<100){state.energy+=0.5;update();}
},4000);

update();
</script>

</body>
</html>
