<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CryptoMiner - Telegram Game</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gradient-gold {
            background: linear-gradient(135deg, #f5af19 0%, #f12711 100%);
        }

        .gradient-blue {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .gradient-purple {
            background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%);
        }

        .gradient-pink {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .text-glow {
            text-shadow: 0 0 20px currentColor;
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card-hover:active {
            transform: scale(0.98);
        }

        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(245, 175, 25, 0.3); }
            50% { box-shadow: 0 0 40px rgba(245, 175, 25, 0.6); }
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .spin-slow {
            animation: spin 8s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            75% { transform: translateX(5px) rotate(5deg); }
        }

        .slot-spin {
            animation: slotSpin 0.1s linear infinite;
        }

        @keyframes slotSpin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100%); }
        }

        .bounce-in {
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .slide-up {
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            0% { transform: translateY(100%); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .progress-bar {
            transition: width 0.5s ease-out;
        }

        .nav-item {
            transition: all 0.3s ease;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: scale(1.1);
        }

        .energy-bar {
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
        }

        .coin-flip {
            animation: coinFlip 0.6s ease-in-out;
        }

        @keyframes coinFlip {
            0% { transform: rotateY(0); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(360deg); }
        }

        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #fff 0%, transparent 70%);
            border-radius: 50%;
            animation: sparkle 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes sparkle {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        .mining-effect {
            animation: miningPulse 0.3s ease-out;
        }

        @keyframes miningPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .case-glow {
            animation: caseGlow 1.5s ease-in-out infinite alternate;
        }

        @keyframes caseGlow {
            0% { filter: drop-shadow(0 0 10px rgba(138, 43, 226, 0.5)); }
            100% { filter: drop-shadow(0 0 30px rgba(138, 43, 226, 0.9)); }
        }

        .rarity-common { border-color: #9ca3af; }
        .rarity-rare { border-color: #3b82f6; }
        .rarity-epic { border-color: #8b5cf6; }
        .rarity-legendary { border-color: #f59e0b; }

        .modal-backdrop {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slot-reel {
            height: 80px;
            overflow: hidden;
            position: relative;
        }

        .slot-symbols {
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .xp-gain {
            animation: xpFloat 1s ease-out forwards;
            position: absolute;
            pointer-events: none;
        }

        @keyframes xpFloat {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
    </style>
</head>
<body class="text-white pb-24">
    <!-- Header -->
    <header class="glass sticky top-0 z-50 px-4 py-3">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 rounded-full gradient-purple flex items-center justify-center font-bold text-lg">
                    <span id="playerInitial">M</span>
                </div>
                <div>
                    <div class="text-sm font-semibold">–£—Ä–æ–≤–µ–Ω—å <span id="playerLevel">1</span></div>
                    <div class="w-24 h-2 bg-gray-700 rounded-full overflow-hidden">
                        <div id="xpBar" class="h-full gradient-blue progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="flex gap-3">
                <div class="glass px-3 py-1.5 rounded-full flex items-center gap-1">
                    <span class="text-yellow-400">üí∞</span>
                    <span id="coins" class="font-bold">1000</span>
                </div>
                <div class="glass px-3 py-1.5 rounded-full flex items-center gap-1">
                    <span class="text-purple-400">üíé</span>
                    <span id="gems" class="font-bold">10</span>
                </div>
            </div>
        </div>
        <!-- Energy Bar -->
        <div class="mt-3">
            <div class="flex justify-between text-xs mb-1">
                <span class="text-cyan-400">‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                <span><span id="currentEnergy">100</span>/<span id="maxEnergy">100</span></span>
            </div>
            <div class="w-full h-3 bg-gray-700 rounded-full overflow-hidden">
                <div id="energyBar" class="h-full energy-bar progress-bar" style="width: 100%"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="px-4 py-4">
        <!-- Work Section -->
        <div id="workTab" class="tab-content active">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">üíº</span> –†–∞–±–æ—Ç–∞
            </h2>
            <div class="grid gap-4">
                <div class="glass rounded-2xl p-4 card-hover cursor-pointer" onclick="doWork('office')">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-xl gradient-blue flex items-center justify-center text-3xl float">üè¢</div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg">–û—Ñ–∏—Å</h3>
                            <p class="text-gray-400 text-sm">+50-100 üí∞ | -10 ‚ö°</p>
                            <p class="text-green-400 text-xs">+15 XP</p>
                        </div>
                        <div class="text-2xl">‚ñ∂Ô∏è</div>
                    </div>
                </div>
                <div class="glass rounded-2xl p-4 card-hover cursor-pointer" onclick="doWork('factory')">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-xl gradient-gold flex items-center justify-center text-3xl float">üè≠</div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg">–ó–∞–≤–æ–¥</h3>
                            <p class="text-gray-400 text-sm">+100-200 üí∞ | -20 ‚ö°</p>
                            <p class="text-green-400 text-xs">+30 XP</p>
                        </div>
                        <div class="text-2xl">‚ñ∂Ô∏è</div>
                    </div>
                </div>
                <div class="glass rounded-2xl p-4 card-hover cursor-pointer" onclick="doWork('business')">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-xl gradient-purple flex items-center justify-center text-3xl float">üíº</div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg">–ë–∏–∑–Ω–µ—Å</h3>
                            <p class="text-gray-400 text-sm">+200-500 üí∞ | -30 ‚ö°</p>
                            <p class="text-green-400 text-xs">+50 XP</p>
                        </div>
                        <div class="text-2xl">‚ñ∂Ô∏è</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mine Section -->
        <div id="mineTab" class="tab-content">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">‚õèÔ∏è</span> –®–∞—Ö—Ç–∞
            </h2>
            <div class="glass rounded-2xl p-6 text-center mb-4">
                <div id="mineRock" class="text-8xl mb-4 cursor-pointer inline-block" onclick="mineRock()">ü™®</div>
                <p class="text-gray-400 mb-2">–ù–∞–∂–º–∏ —á—Ç–æ–±—ã –¥–æ–±—ã—Ç—å —Ä–µ—Å—É—Ä—Å—ã!</p>
                <p class="text-sm">–ö–∞–∂–¥—ã–π –∫–ª–∏–∫: -5 ‚ö° | +5-20 üí∞ | –®–∞–Ω—Å üíé 5%</p>
            </div>
            <div class="glass rounded-2xl p-4">
                <h3 class="font-bold mb-3">üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —Ä—É–¥—ã</h3>
                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ÔøΩite</div>
                        <div class="text-xs text-gray-400">–£–≥–æ–ª—å</div>
                        <div id="coalCount" class="font-bold">0</div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">üî∂</div>
                        <div class="text-xs text-gray-400">–ñ–µ–ª–µ–∑–æ</div>
                        <div id="ironCount" class="font-bold">0</div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">üíé</div>
                        <div class="text-xs text-gray-400">–ê–ª–º–∞–∑—ã</div>
                        <div id="diamondCount" class="font-bold">0</div>
                    </div>
                </div>
            </div>
            <button onclick="sellOres()" class="w-full mt-4 gradient-green text-white font-bold py-3 rounded-xl card-hover">
                üí∞ –ü—Ä–æ–¥–∞—Ç—å –≤—Å—é —Ä—É–¥—É
            </button>
        </div>

        <!-- Shop Section -->
        <div id="shopTab" class="tab-content">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">üõí</span> –ú–∞–≥–∞–∑–∏–Ω
            </h2>
            <div class="grid gap-3">
                <div class="glass rounded-2xl p-4 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-xl bg-cyan-500/20 flex items-center justify-center text-3xl">‚ö°</div>
                        <div class="flex-1">
                            <h3 class="font-bold">–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫</h3>
                            <p class="text-gray-400 text-sm">+50 —ç–Ω–µ—Ä–≥–∏–∏</p>
                        </div>
                        <button onclick="buyItem('energy')" class="gradient-blue px-4 py-2 rounded-xl font-bold">
                            200 üí∞
                        </button>
                    </div>
                </div>
                <div class="glass rounded-2xl p-4 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-xl bg-yellow-500/20 flex items-center justify-center text-3xl">‚õèÔ∏è</div>
                        <div class="flex-1">
                            <h3 class="font-bold">–£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∏—Ä–∫–∞</h3>
                            <p class="text-gray-400 text-sm">+25% –¥–æ–±—ã—á–∏ –≤ —à–∞—Ö—Ç–µ</p>
                            <p id="pickaxeLevel" class="text-green-400 text-xs">–£—Ä–æ–≤–µ–Ω—å: 1</p>
                        </div>
                        <button onclick="buyItem('pickaxe')" class="gradient-gold px-4 py-2 rounded-xl font-bold">
                            500 üí∞
                        </button>
                    </div>
                </div>
                <div class="glass rounded-2xl p-4 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-xl bg-green-500/20 flex items-center justify-center text-3xl">üîã</div>
                        <div class="flex-1">
                            <h3 class="font-bold">–ë–∞—Ç–∞—Ä–µ—è</h3>
                            <p class="text-gray-400 text-sm">+20 –º–∞–∫—Å. —ç–Ω–µ—Ä–≥–∏–∏</p>
                        </div>
                        <button onclick="buyItem('battery')" class="gradient-green px-4 py-2 rounded-xl font-bold">
                            1000 üí∞
                        </button>
                    </div>
                </div>
                <div class="glass rounded-2xl p-4 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-xl bg-purple-500/20 flex items-center justify-center text-3xl">üíé</div>
                        <div class="flex-1">
                            <h3 class="font-bold">10 –ì–µ–º–æ–≤</h3>
                            <p class="text-gray-400 text-sm">–ü—Ä–µ–º–∏—É–º –≤–∞–ª—é—Ç–∞</p>
                        </div>
                        <button onclick="buyItem('gems')" class="gradient-purple px-4 py-2 rounded-xl font-bold">
                            5000 üí∞
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Games Section -->
        <div id="gamesTab" class="tab-content">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">üéÆ</span> –ò–≥—Ä—ã
            </h2>
            <div class="grid gap-4">
                <!-- Coin Flip -->
                <div class="glass rounded-2xl p-4">
                    <h3 class="font-bold text-lg mb-3 flex items-center gap-2">ü™ô –ü–æ–¥–±—Ä–æ—Å –º–æ–Ω–µ—Ç—ã</h3>
                    <div class="text-center mb-4">
                        <div id="coinFlipResult" class="text-6xl mb-4">ü™ô</div>
                        <div class="flex justify-center gap-4 mb-4">
                            <button onclick="playCoinFlip('heads')" class="gradient-gold px-6 py-3 rounded-xl font-bold">
                                –û—Ä—ë–ª
                            </button>
                            <button onclick="playCoinFlip('tails')" class="gradient-purple px-6 py-3 rounded-xl font-bold">
                                –†–µ—à–∫–∞
                            </button>
                        </div>
                        <p class="text-gray-400 text-sm">–°—Ç–∞–≤–∫–∞: 100 üí∞ | –í—ã–∏–≥—Ä—ã—à: x2</p>
                    </div>
                </div>
                
                <!-- Dice Game -->
                <div class="glass rounded-2xl p-4">
                    <h3 class="font-bold text-lg mb-3 flex items-center gap-2">üé≤ –ö–æ—Å—Ç–∏</h3>
                    <div class="text-center">
                        <div class="flex justify-center gap-4 mb-4">
                            <div id="dice1" class="text-5xl">üé≤</div>
                            <div id="dice2" class="text-5xl">üé≤</div>
                        </div>
                        <button onclick="playDice()" class="gradient-blue px-8 py-3 rounded-xl font-bold">
                            –ë—Ä–æ—Å–∏—Ç—å (50 üí∞)
                        </button>
                        <p class="text-gray-400 text-sm mt-2">–î—É–±–ª—å = x3 | –°—É–º–º–∞ 7 = x2 | 12 = x5</p>
                    </div>
                </div>

                <!-- Lucky Number -->
                <div class="glass rounded-2xl p-4">
                    <h3 class="font-bold text-lg mb-3 flex items-center gap-2">üî¢ –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</h3>
                    <div class="text-center">
                        <div id="guessDisplay" class="text-4xl font-bold mb-4 text-cyan-400">?</div>
                        <div class="grid grid-cols-5 gap-2 mb-4">
                            ${[1,2,3,4,5,6,7,8,9,10].map(n => `
                                <button onclick="guessNumber(${n})" class="bg-gray-700 hover:bg-gray-600 py-2 rounded-lg font-bold transition-colors">${n}</button>
                            `).join('')}
                        </div>
                        <p class="text-gray-400 text-sm">–°—Ç–∞–≤–∫–∞: 100 üí∞ | –£–≥–∞–¥–∞–ª = x10</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Casino Section -->
        <div id="casinoTab" class="tab-content">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">üé∞</span> –ö–∞–∑–∏–Ω–æ
            </h2>
            
            <!-- Slots -->
            <div class="glass rounded-2xl p-6 mb-4">
                <h3 class="font-bold text-lg mb-4 text-center">üé∞ –°–ª–æ—Ç—ã</h3>
                <div class="flex justify-center gap-2 mb-6">
                    <div class="w-20 h-24 bg-gray-800 rounded-xl flex items-center justify-center text-4xl border-2 border-yellow-500/50 slot-reel overflow-hidden">
                        <span id="slot1">üçí</span>
                    </div>
                    <div class="w-20 h-24 bg-gray-800 rounded-xl flex items-center justify-center text-4xl border-2 border-yellow-500/50 slot-reel overflow-hidden">
                        <span id="slot2">üçã</span>
                    </div>
                    <div class="w-20 h-24 bg-gray-800 rounded-xl flex items-center justify-center text-4xl border-2 border-yellow-500/50 slot-reel overflow-hidden">
                        <span id="slot3">üçä</span>
                    </div>
                </div>
                <div class="flex justify-center gap-3 mb-4">
                    <button onclick="playSlots(50)" class="gradient-gold px-6 py-3 rounded-xl font-bold">
                        50 üí∞
                    </button>
                    <button onclick="playSlots(100)" class="gradient-purple px-6 py-3 rounded-xl font-bold">
                        100 üí∞
                    </button>
                    <button onclick="playSlots(500)" class="gradient-pink px-6 py-3 rounded-xl font-bold">
                        500 üí∞
                    </button>
                </div>
                <div class="text-center text-sm text-gray-400">
                    <p>üçíüçíüçí = x3 | üçãüçãüçã = x5 | üíéüíéüíé = x20</p>
                    <p>7Ô∏è‚É£7Ô∏è‚É£7Ô∏è‚É£ = x50 | –õ—é–±—ã–µ 2 = x1.5</p>
                </div>
            </div>

            <!-- Cases -->
            <div class="glass rounded-2xl p-4">
                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">üì¶ –ö–µ–π—Å—ã</h3>
                <div class="grid gap-3">
                    <div class="bg-gray-800 rounded-xl p-4 card-hover cursor-pointer case-glow" onclick="openCase('common')">
                        <div class="flex items-center gap-4">
                            <div class="text-4xl">üì¶</div>
                            <div class="flex-1">
                                <h4 class="font-bold text-gray-300">–û–±—ã—á–Ω—ã–π –∫–µ–π—Å</h4>
                                <p class="text-sm text-gray-500">50-200 üí∞ –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç—ã</p>
                            </div>
                            <div class="text-yellow-400 font-bold">100 üí∞</div>
                        </div>
                    </div>
                    <div class="bg-blue-900/30 rounded-xl p-4 card-hover cursor-pointer border border-blue-500/30" onclick="openCase('rare')">
                        <div class="flex items-center gap-4">
                            <div class="text-4xl">üéÅ</div>
                            <div class="flex-1">
                                <h4 class="font-bold text-blue-300">–†–µ–¥–∫–∏–π –∫–µ–π—Å</h4>
                                <p class="text-sm text-blue-400/70">100-500 üí∞ –∏–ª–∏ —Ä–µ–¥–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã</p>
                            </div>
                            <div class="text-yellow-400 font-bold">500 üí∞</div>
                        </div>
                    </div>
                    <div class="bg-purple-900/30 rounded-xl p-4 card-hover cursor-pointer border border-purple-500/50" onclick="openCase('epic')">
                        <div class="flex items-center gap-4">
                            <div class="text-4xl">üíú</div>
                            <div class="flex-1">
                                <h4 class="font-bold text-purple-300">–≠–ø–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å</h4>
                                <p class="text-sm text-purple-400/70">500-2000 üí∞ –∏–ª–∏ —ç–ø–∏–∫ –ø—Ä–µ–¥–º–µ—Ç—ã</p>
                            </div>
                            <div class="text-purple-400 font-bold">5 üíé</div>
                        </div>
                    </div>
                    <div class="bg-yellow-900/30 rounded-xl p-4 card-hover cursor-pointer border border-yellow-500/50 pulse-glow" onclick="openCase('legendary')">
                        <div class="flex items-center gap-4">
                            <div class="text-4xl">üëë</div>
                            <div class="flex-1">
                                <h4 class="font-bold text-yellow-300">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å</h4>
                                <p class="text-sm text-yellow-400/70">1000-10000 üí∞ –∏–ª–∏ –ª–µ–≥–µ–Ω–¥–∞—Ä–∫–∏!</p>
                            </div>
                            <div class="text-purple-400 font-bold">20 üíé</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profileTab" class="tab-content">
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                <span class="text-3xl">üë§</span> –ü—Ä–æ—Ñ–∏–ª—å
            </h2>
            <div class="glass rounded-2xl p-6 text-center mb-4">
                <div class="w-24 h-24 mx-auto rounded-full gradient-purple flex items-center justify-center text-5xl mb-4">
                    üéÆ
                </div>
                <h3 class="text-2xl font-bold mb-1">–ò–≥—Ä–æ–∫</h3>
                <p class="text-gray-400 mb-4">–£—Ä–æ–≤–µ–Ω—å <span id="profileLevel">1</span></p>
                <div class="w-full h-4 bg-gray-700 rounded-full overflow-hidden mb-2">
                    <div id="profileXpBar" class="h-full gradient-blue progress-bar" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray-400"><span id="currentXp">0</span> / <span id="neededXp">100</span> XP</p>
            </div>
            
            <div class="glass rounded-2xl p-4 mb-4">
                <h3 class="font-bold mb-3">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">üí∞</div>
                        <div class="text-xs text-gray-400">–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                        <div id="totalEarned" class="font-bold text-yellow-400">0</div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">üéÆ</div>
                        <div class="text-xs text-gray-400">–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ</div>
                        <div id="gamesPlayed" class="font-bold text-blue-400">0</div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">‚õèÔ∏è</div>
                        <div class="text-xs text-gray-400">–î–æ–±—ã—Ç–æ —Ä—É–¥—ã</div>
                        <div id="totalMined" class="font-bold text-orange-400">0</div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">üèÜ</div>
                        <div class="text-xs text-gray-400">–ü–æ–±–µ–¥ –≤ –∫–∞–∑–∏–Ω–æ</div>
                        <div id="casinoWins" class="font-bold text-green-400">0</div>
                    </div>
                </div>
            </div>

            <div class="glass rounded-2xl p-4">
                <h3 class="font-bold mb-3">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
                <div id="inventory" class="grid grid-cols-4 gap-2">
                    <div class="bg-gray-800 rounded-lg p-3 text-center text-2xl opacity-30">üì¶</div>
                    <div class="bg-gray-800 rounded-lg p-3 text-center text-2xl opacity-30">üì¶</div>
                    <div class="bg-gray-800 rounded-lg p-3 text-center text-2xl opacity-30">üì¶</div>
                    <div class="bg-gray-800 rounded-lg p-3 text-center text-2xl opacity-30">üì¶</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 glass border-t border-white/10 px-2 py-2">
        <div class="flex justify-around">
            <button onclick="showTab('work')" class="nav-item active flex flex-col items-center px-4 py-2 rounded-xl" data-tab="work">
                <span class="text-xl">üíº</span>
                <span class="text-xs mt-1">–†–∞–±–æ—Ç–∞</span>
            </button>
            <button onclick="showTab('mine')" class="nav-item flex flex-col items-center px-4 py-2 rounded-xl" data-tab="mine">
                <span class="text-xl">‚õèÔ∏è</span>
                <span class="text-xs mt-1">–®–∞—Ö—Ç–∞</span>
            </button>
            <button onclick="showTab('shop')" class="nav-item flex flex-col items-center px-4 py-2 rounded-xl" data-tab="shop">
                <span class="text-xl">üõí</span>
                <span class="text-xs mt-1">–ú–∞–≥–∞–∑–∏–Ω</span>
            </button>
            <button onclick="showTab('games')" class="nav-item flex flex-col items-center px-4 py-2 rounded-xl" data-tab="games">
                <span class="text-xl">üéÆ</span>
                <span class="text-xs mt-1">–ò–≥—Ä—ã</span>
            </button>
            <button onclick="showTab('casino')" class="nav-item flex flex-col items-center px-4 py-2 rounded-xl" data-tab="casino">
                <span class="text-xl">üé∞</span>
                <span class="text-xs mt-1">–ö–∞–∑–∏–Ω–æ</span>
            </button>
            <button onclick="showTab('profile')" class="nav-item flex flex-col items-center px-4 py-2 rounded-xl" data-tab="profile">
                <span class="text-xl">üë§</span>
                <span class="text-xs mt-1">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </div>
    </nav>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 modal-backdrop z-50 hidden flex items-center justify-center p-4">
        <div class="glass rounded-2xl p-6 max-w-sm w-full bounce-in">
            <div id="modalContent" class="text-center">
                <!-- Dynamic content -->
            </div>
            <button onclick="closeModal()" class="w-full mt-4 bg-gray-700 hover:bg-gray-600 py-3 rounded-xl font-bold transition-colors">
                –ó–∞–∫—Ä—ã—Ç—å
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-20 left-1/2 -translate-x-1/2 glass px-6 py-3 rounded-full z-50 hidden transition-all duration-300">
        <span id="toastText"></span>
    </div>

    <script>
        // Game State
        let gameState = {
            coins: 1000,
            gems: 10,
            energy: 100,
            maxEnergy: 100,
            level: 1,
            xp: 0,
            xpNeeded: 100,
            pickaxeLevel: 1,
            ores: { coal: 0, iron: 0, diamond: 0 },
            stats: {
                totalEarned: 0,
                gamesPlayed: 0,
                totalMined: 0,
                casinoWins: 0
            },
            inventory: []
        };

        // Load saved game
        function loadGame() {
            const saved = localStorage.getItem('telegramMiniGame');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
            }
            updateUI();
        }

        // Save game
        function saveGame() {
            localStorage.setItem('telegramMiniGame', JSON.stringify(gameState));
        }

        // Update UI
        function updateUI() {
            document.getElementById('coins').textContent = formatNumber(gameState.coins);
            document.getElementById('gems').textContent = gameState.gems;
            document.getElementById('currentEnergy').textContent = gameState.energy;
            document.getElementById('maxEnergy').textContent = gameState.maxEnergy;
            document.getElementById('energyBar').style.width = (gameState.energy / gameState.maxEnergy * 100) + '%';
            document.getElementById('playerLevel').textContent = gameState.level;
            document.getElementById('profileLevel').textContent = gameState.level;
            document.getElementById('xpBar').style.width = (gameState.xp / gameState.xpNeeded * 100) + '%';
            document.getElementById('profileXpBar').style.width = (gameState.xp / gameState.xpNeeded * 100) + '%';
            document.getElementById('currentXp').textContent = gameState.xp;
            document.getElementById('neededXp').textContent = gameState.xpNeeded;
            document.getElementById('pickaxeLevel').textContent = '–£—Ä–æ–≤–µ–Ω—å: ' + gameState.pickaxeLevel;
            document.getElementById('coalCount').textContent = gameState.ores.coal;
            document.getElementById('ironCount').textContent = gameState.ores.iron;
            document.getElementById('diamondCount').textContent = gameState.ores.diamond;
            document.getElementById('totalEarned').textContent = formatNumber(gameState.stats.totalEarned);
            document.getElementById('gamesPlayed').textContent = gameState.stats.gamesPlayed;
            document.getElementById('totalMined').textContent = gameState.stats.totalMined;
            document.getElementById('casinoWins').textContent = gameState.stats.casinoWins;
            saveGame();
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        // Add XP
        function addXP(amount) {
            gameState.xp += amount;
            while (gameState.xp >= gameState.xpNeeded) {
                gameState.xp -= gameState.xpNeeded;
                gameState.level++;
                gameState.xpNeeded = Math.floor(gameState.xpNeeded * 1.5);
                showModal('üéâ –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω!', `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${gameState.level}!`, '‚¨ÜÔ∏è');
            }
            updateUI();
        }

        // Show Tab
        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.add('active');
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
        }

        // Toast
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const toastText = document.getElementById('toastText');
            toastText.textContent = message;
            toast.classList.remove('hidden');
            toast.style.background = type === 'success' ? 'rgba(34, 197, 94, 0.2)' : 
                                     type === 'error' ? 'rgba(239, 68, 68, 0.2)' : 'rgba(255, 255, 255, 0.1)';
            setTimeout(() => toast.classList.add('hidden'), 2000);
        }

        // Modal
        function showModal(title, message, emoji = 'üéâ') {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            content.innerHTML = `
                <div class="text-6xl mb-4">${emoji}</div>
                <h3 class="text-xl font-bold mb-2">${title}</h3>
                <p class="text-gray-400">${message}</p>
            `;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        // Work
        function doWork(type) {
            const works = {
                office: { min: 50, max: 100, energy: 10, xp: 15 },
                factory: { min: 100, max: 200, energy: 20, xp: 30 },
                business: { min: 200, max: 500, energy: 30, xp: 50 }
            };
            const work = works[type];
            
            if (gameState.energy < work.energy) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }

            gameState.energy -= work.energy;
            const reward = Math.floor(Math.random() * (work.max - work.min + 1)) + work.min;
            gameState.coins += reward;
            gameState.stats.totalEarned += reward;
            addXP(work.xp);
            showToast(`+${reward} üí∞ | +${work.xp} XP`, 'success');
            updateUI();
        }

        // Mine
        function mineRock() {
            if (gameState.energy < 5) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }

            gameState.energy -= 5;
            gameState.stats.totalMined++;
            
            const rock = document.getElementById('mineRock');
            rock.classList.add('mining-effect');
            setTimeout(() => rock.classList.remove('mining-effect'), 300);

            const bonus = 1 + (gameState.pickaxeLevel - 1) * 0.25;
            const roll = Math.random();

            if (roll < 0.05) {
                gameState.ores.diamond++;
                showToast('üíé –ù–∞–π–¥–µ–Ω –∞–ª–º–∞–∑!', 'success');
            } else if (roll < 0.25) {
                const amount = Math.ceil((Math.floor(Math.random() * 3) + 1) * bonus);
                gameState.ores.iron += amount;
                showToast(`+${amount} üî∂ –ñ–µ–ª–µ–∑–æ`, 'success');
            } else {
                const amount = Math.ceil((Math.floor(Math.random() * 5) + 2) * bonus);
                gameState.ores.coal += amount;
                showToast(`+${amount} ite –£–≥–æ–ª—å`, 'success');
            }

            addXP(5);
            updateUI();
        }

        function sellOres() {
            const total = gameState.ores.coal * 5 + gameState.ores.iron * 15 + gameState.ores.diamond * 100;
            if (total === 0) {
                showToast('–ù–µ—Ç —Ä—É–¥—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏!', 'error');
                return;
            }
            gameState.coins += total;
            gameState.stats.totalEarned += total;
            gameState.ores = { coal: 0, iron: 0, diamond: 0 };
            showToast(`+${total} üí∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏!`, 'success');
            updateUI();
        }

        // Shop
        function buyItem(item) {
            const items = {
                energy: { cost: 200, currency: 'coins' },
                pickaxe: { cost: 500, currency: 'coins' },
                battery: { cost: 1000, currency: 'coins' },
                gems: { cost: 5000, currency: 'coins' }
            };

            const i = items[item];
            if (gameState.coins < i.cost) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }

            gameState.coins -= i.cost;

            switch(item) {
                case 'energy':
                    gameState.energy = Math.min(gameState.energy + 50, gameState.maxEnergy);
                    showToast('+50 ‚ö° –≠–Ω–µ—Ä–≥–∏–∏!', 'success');
                    break;
                case 'pickaxe':
                    gameState.pickaxeLevel++;
                    showToast(`–ö–∏—Ä–∫–∞ —É–ª—É—á—à–µ–Ω–∞ –¥–æ —É—Ä–æ–≤–Ω—è ${gameState.pickaxeLevel}!`, 'success');
                    break;
                case 'battery':
                    gameState.maxEnergy += 20;
                    showToast('+20 –∫ –º–∞–∫—Å–∏–º—É–º—É —ç–Ω–µ—Ä–≥–∏–∏!', 'success');
                    break;
                case 'gems':
                    gameState.gems += 10;
                    showToast('+10 üíé –ì–µ–º–æ–≤!', 'success');
                    break;
            }
            updateUI();
        }

        // Coin Flip
        function playCoinFlip(choice) {
            if (gameState.coins < 100) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }

            gameState.coins -= 100;
            gameState.stats.gamesPlayed++;
            
            const coin = document.getElementById('coinFlipResult');
            coin.classList.add('coin-flip');
            
            setTimeout(() => {
                coin.classList.remove('coin-flip');
                const result = Math.random() < 0.5 ? 'heads' : 'tails';
                coin.textContent = result === 'heads' ? 'ü¶Ö' : 'üåü';
                
                if (result === choice) {
                    gameState.coins += 200;
                    gameState.stats.totalEarned += 200;
                    gameState.stats.casinoWins++;
                    showToast('+200 üí∞ –ü–æ–±–µ–¥–∞!', 'success');
                } else {
                    showToast('–ù–µ –ø–æ–≤–µ–∑–ª–æ!', 'error');
                }
                addXP(10);
                updateUI();
            }, 600);
        }

        // Dice
        const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
        function playDice() {
            if (gameState.coins < 50) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }

            gameState.coins -= 50;
            gameState.stats.gamesPlayed++;

            const dice1 = document.getElementById('dice1');
            const dice2 = document.getElementById('dice2');
            
            let rolls = 0;
            const rollInterval = setInterval(() => {
                dice1.textContent = diceEmojis[Math.floor(Math.random() * 6)];
                dice2.textContent = diceEmojis[Math.floor(Math.random() * 6)];
                rolls++;
                if (rolls > 10) {
                    clearInterval(rollInterval);
                    const r1 = Math.floor(Math.random() * 6) + 1;
                    const r2 = Math.floor(Math.random() * 6) + 1;
                    dice1.textContent = diceEmojis[r1 - 1];
                    dice2.textContent = diceEmojis[r2 - 1];
                    
                    let win = 0;
                    if (r1 === r2) {
                        if (r1 === 6) win = 250; // Double 6 = x5
                        else win = 150; // Double = x3
                    } else if (r1 + r2 === 7) {
                        win = 100; // Sum 7 = x2
                    } else if (r1 + r2 === 12) {
                        win = 250; // Sum 12 = x5
                    }

                    if (win > 0) {
                        gameState.coins += win;
                        gameState.stats.totalEarned += win;
                        gameState.stats.casinoWins++;
                        showToast(`+${win} üí∞ –ü–æ–±–µ–¥–∞!`, 'success');
                    } else {
                        showToast('–ù–µ –ø–æ–≤–µ–∑–ª–æ!', 'error');
                    }
                    addXP(10);
                    updateUI();
                }
            }, 100);
        }

        // Guess Number
        function guessNumber(num) {
            if (gameState.coins < 100) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }

            gameState.coins -= 100;
            gameState.stats.gamesPlayed++;

            const display = document.getElementById('guessDisplay');
            let rolls = 0;
            const rollInterval = setInterval(() => {
                display.textContent = Math.floor(Math.random() * 10) + 1;
                rolls++;
                if (rolls > 15) {
                    clearInterval(rollInterval);
                    const result = Math.floor(Math.random() * 10) + 1;
                    display.textContent = result;

                    if (result === num) {
                        gameState.coins += 1000;
                        gameState.stats.totalEarned += 1000;
                        gameState.stats.casinoWins++;
                        showModal('üéâ –î–ñ–ï–ö–ü–û–¢!', '+1000 üí∞ –í—ã —É–≥–∞–¥–∞–ª–∏ —á–∏—Å–ª–æ!', 'üî¢');
                    } else {
                        showToast(`–ó–∞–≥–∞–¥–∞–Ω–æ: ${result}. –ù–µ –ø–æ–≤–µ–∑–ª–æ!`, 'error');
                    }
                    addXP(10);
                    updateUI();
                }
            }, 80);
        }

        // Slots
        const slotSymbols = ['üçí', 'üçã', 'üçä', 'üçá', '‚≠ê', 'üíé', '7Ô∏è‚É£'];
        function playSlots(bet) {
            if (gameState.coins < bet) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }

            gameState.coins -= bet;
            gameState.stats.gamesPlayed++;

            const slot1 = document.getElementById('slot1');
            const slot2 = document.getElementById('slot2');
            const slot3 = document.getElementById('slot3');

            let rolls = 0;
            const rollInterval = setInterval(() => {
                slot1.textContent = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                slot2.textContent = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                slot3.textContent = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                rolls++;
                
                if (rolls > 20) {
                    clearInterval(rollInterval);
                    const r1 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    const r2 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    const r3 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    slot1.textContent = r1;
                    slot2.textContent = r2;
                    slot3.textContent = r3;

                    let multiplier = 0;
                    if (r1 === r2 && r2 === r3) {
                        if (r1 === '7Ô∏è‚É£') multiplier = 50;
                        else if (r1 === 'üíé') multiplier = 20;
                        else if (r1 === '‚≠ê') multiplier = 10;
                        else if (r1 === 'üçá') multiplier = 7;
                        else if (r1 === 'üçã') multiplier = 5;
                        else multiplier = 3;
                    } else if (r1 === r2 || r2 === r3 || r1 === r3) {
                        multiplier = 1.5;
                    }

                    if (multiplier > 0) {
                        const win = Math.floor(bet * multiplier);
                        gameState.coins += win;
                        gameState.stats.totalEarned += win;
                        gameState.stats.casinoWins++;
                        if (multiplier >= 10) {
                            showModal('üé∞ –ë–û–õ–¨–®–û–ô –í–´–ò–ì–†–´–®!', `+${win} üí∞ (x${multiplier})`, 'üéâ');
                        } else {
                            showToast(`+${win} üí∞ (x${multiplier})`, 'success');
                        }
                    } else {
                        showToast('–ù–µ –ø–æ–≤–µ–∑–ª–æ!', 'error');
                    }
                    addXP(15);
                    updateUI();
                }
            }, 80);
        }

        // Cases
        function openCase(type) {
            const cases = {
                common: { cost: 100, currency: 'coins', minReward: 50, maxReward: 200, gemChance: 0.05 },
                rare: { cost: 500, currency: 'coins', minReward: 100, maxReward: 500, gemChance: 0.15 },
                epic: { cost: 5, currency: 'gems', minReward: 500, maxReward: 2000, gemChance: 0.3 },
                legendary: { cost: 20, currency: 'gems', minReward: 1000, maxReward: 10000, gemChance: 0.5 }
            };

            const c = cases[type];
            if (c.currency === 'coins' && gameState.coins < c.cost) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error');
                return;
            }
            if (c.currency === 'gems' && gameState.gems < c.cost) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–µ–º–æ–≤!', 'error');
                return;
            }

            if (c.currency === 'coins') gameState.coins -= c.cost;
            else gameState.gems -= c.cost;

            gameState.stats.gamesPlayed++;

            const reward = Math.floor(Math.random() * (c.maxReward - c.minReward + 1)) + c.minReward;
            const gotGem = Math.random() < c.gemChance;
            const gemCount = type === 'legendary' ? Math.floor(Math.random() * 10) + 5 : 
                            type === 'epic' ? Math.floor(Math.random() * 5) + 2 : 1;

            gameState.coins += reward;
            gameState.stats.totalEarned += reward;
            
            let message = `+${reward} üí∞`;
            if (gotGem) {
                gameState.gems += gemCount;
                message += ` –∏ +${gemCount} üíé`;
            }

            const rarityNames = {
                common: '–û–±—ã—á–Ω—ã–π',
                rare: '–†–µ–¥–∫–∏–π',
                epic: '–≠–ø–∏—á–µ—Å–∫–∏–π',
                legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'
            };

            showModal(`üì¶ ${rarityNames[type]} –∫–µ–π—Å`, message, gotGem ? 'üíé' : 'üí∞');
            addXP(type === 'legendary' ? 100 : type === 'epic' ? 50 : type === 'rare' ? 25 : 10);
            updateUI();
        }

        // Energy regeneration
        setInterval(() => {
            if (gameState.energy < gameState.maxEnergy) {
                gameState.energy = Math.min(gameState.energy + 1, gameState.maxEnergy);
                updateUI();
            }
        }, 10000); // +1 energy every 10 seconds

        // Initialize
        loadGame();

        // Telegram WebApp integration
        const tg = window.Telegram?.WebApp;
        
        if (tg) {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            tg.ready();
            tg.expand();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = tg.initDataUnsafe?.user;
            if (user) {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const playerInitial = document.getElementById('playerInitial');
                playerInitial.textContent = (user.first_name || 'U')[0].toUpperCase();
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const savedKey = `telegramMiniGame_${user.id}`;
                const userSave = localStorage.getItem(savedKey);
                if (userSave) {
                    gameState = { ...gameState, ...JSON.parse(userSave) };
                    updateUI();
                }
                
                // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º saveGame –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ ID
                window.saveGameOriginal = saveGame;
                window.saveGame = function() {
                    localStorage.setItem(savedKey, JSON.stringify(gameState));
                }
            }
            
            // –¢–µ–º–∞ Telegram
            document.body.style.setProperty('--tg-theme-bg-color', tg.backgroundColor);
            document.body.style.setProperty('--tg-theme-text-color', tg.textColor);
            
            // Haptic feedback –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö
            window.hapticFeedback = function(type = 'light') {
                if (tg.HapticFeedback) {
                    tg.HapticFeedback.impactOccurred(type);
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–±—Ä–∞—Ü–∏—é –∫ –¥–µ–π—Å—Ç–≤–∏—è–º
            const originalDoWork = doWork;
            window.doWork = function(type) {
                hapticFeedback('medium');
                originalDoWork(type);
            }
            
            const originalMineRock = mineRock;
            window.mineRock = function() {
                hapticFeedback('light');
                originalMineRock();
            }
            
            // –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            if (tg.MainButton) {
                tg.MainButton.setText('üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏');
                tg.MainButton.color = '#8B5CF6';
                tg.MainButton.textColor = '#FFFFFF';
                
                tg.MainButton.onClick(() => {
                    saveGame();
                    tg.HapticFeedback?.notificationOccurred('success');
                    tg.showAlert('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!', () => {
                        tg.close();
                    });
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è
                const originalShowTab = showTab;
                window.showTab = function(tab) {
                    originalShowTab(tab);
                    if (tab === 'profile') {
                        tg.MainButton.show();
                    } else {
                        tg.MainButton.hide();
                    }
                }
            }
            
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
            tg.enableClosingConfirmation();
            
        } else {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
            window.hapticFeedback = function() {};
        }
    </script>
</body>
</html>