<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Temshik Game v3</title>
<style>
body{
margin:0;font-family:Inter,system-ui;background:#0b0c10;color:#fff;
display:flex;flex-direction:column;height:100vh
}
header{padding:16px}
.card{
background:#1c1d26;border-radius:16px;padding:14px;margin-bottom:10px
}
h2{margin:0 0 6px}
.small{font-size:12px;color:#aaa}
.bar{height:8px;background:#333;border-radius:8px;overflow:hidden}
.fill{height:100%}
.energy{background:#22d3ee}
.rep{background:#facc15}
main{flex:1;overflow:auto;padding:16px}
button{
background:#5d5fef;border:none;border-radius:12px;
color:#fff;padding:10px 14px;font-weight:600
}
button:disabled{opacity:.4}
nav{
display:flex;justify-content:space-around;
background:#111;padding:10px
}
.log{
background:#0003;border-radius:12px;padding:10px;
font-size:12px;height:120px;overflow:auto
}
.log div{margin-bottom:6px}
</style>
</head>

<body>

<header>
<div class="card">
<div class="small">–ö–ê–ü–ò–¢–ê–õ</div>
<h2 id="money">0 ‚Ç¥</h2>

<div class="small">–≠–ù–ï–†–ì–ò–Ø <span id="energyText"></span></div>
<div class="bar"><div id="energyBar" class="fill energy"></div></div>

<div class="small" style="margin-top:6px">–†–ï–ü–£–¢–ê–¶–ò–Ø <span id="repText"></span></div>
<div class="bar"><div id="repBar" class="fill rep"></div></div>
</div>
</header>

<main>

<section id="tab-work">
<h3>üí∏ –¢–µ–º–∫–∏</h3>
<div id="schemeList"></div>
<div class="log" id="log"></div>
</section>

<section id="tab-food" style="display:none">
<h3>‚òï –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</h3>
<div id="foodList"></div>
</section>

<section id="tab-assets" style="display:none">
<h3>üíº –ê–∫—Ç–∏–≤—ã</h3>
<div id="assetList"></div>
</section>

</main>

<nav>
<button onclick="openTab('work')">–¢–µ–º–∫–∏</button>
<button onclick="openTab('food')">–ï–¥–∞</button>
<button onclick="openTab('assets')">–ê–∫—Ç–∏–≤—ã</button>
</nav>

<script>
// ================== STATE ==================
let state = JSON.parse(localStorage.getItem('temshik_save')) || {
money:1000,
energy:100,
rep:10,
assets:[]
};

// ================== DATA ==================
const schemes=[
{name:"OLX –¥—Ä–æ–ø",cost:200,min:-100,max:300,energy:15,risk:.25,rep:3},
{name:"–§–µ–π–∫ –º–∞–≥–∞–∑–∏–Ω",cost:3000,min:-1500,max:6000,energy:30,risk:.4,rep:6},
{name:"–ö—Ä–∏–ø—Ç–æ —Å–∫–∞–º",cost:12000,min:-6000,max:20000,energy:45,risk:.55,rep:10}
];

const food=[
{name:"‚òï –ö–æ—Ñ–µ",cost:50,energy:15},
{name:"ü•§ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫",cost:120,energy:30},
{name:"üåØ –®–∞—É—Ä–º–∞",cost:250,energy:60}
];

const assets=[
{name:"VPN",cost:2000,income:20},
{name:"SIM-—Å–µ—Ç–∫–∞",cost:8000,income:60},
{name:"–î—Ä–æ–ø —Ñ–µ—Ä–º–∞",cost:20000,income:150}
];

// ================== UI ==================
const moneyEl = document.getElementById('money');
const energyBar = document.getElementById('energyBar');
const energyText = document.getElementById('energyText');
const repBar = document.getElementById('repBar');
const repText = document.getElementById('repText');
const logEl = document.getElementById('log');

function log(msg){
logEl.insertAdjacentHTML('afterbegin',`<div>${msg}</div>`);
}

function save(){
localStorage.setItem('temshik_save',JSON.stringify(state));
}

function update(){
moneyEl.textContent = state.money.toLocaleString()+" ‚Ç¥";
energyText.textContent = Math.floor(state.energy)+"%";
energyBar.style.width = state.energy+"%";
repText.textContent = state.rep;
repBar.style.width = Math.min(100,state.rep/3)+"%";
save();
render();
}

// ================== GAME LOGIC ==================
function runScheme(i){
let s = schemes[i];
if(state.money<s.cost || state.energy<s.energy) return;

state.money -= s.cost;
state.energy -= s.energy;

if(Math.random()<s.risk){
state.money += s.cost + s.min;
state.rep = Math.max(0,state.rep-5);
log("‚ùå –ö–∏–¥–æ–∫ "+s.min+" ‚Ç¥");
}else{
let profit = Math.floor(Math.random()*(s.max-s.min+1))+s.min;
state.money += s.cost + profit;
state.rep += s.rep;
log("üí∞ +"+profit+" ‚Ç¥");
}

update();
}

function eat(i){
let f = food[i];
if(state.money<f.cost || state.energy>=100) return;
state.money -= f.cost;
state.energy = Math.min(100,state.energy+f.energy);
log("‚ö° –≠–Ω–µ—Ä–≥–∏—è +"+f.energy+"%");
update();
}

function buyAsset(i){
if(state.assets.includes(i) || state.money<assets[i].cost) return;
state.money -= assets[i].cost;
state.assets.push(i);
log("üíº –ö—É–ø–ª–µ–Ω "+assets[i].name);
update();
}

// ================== PASSIVE ==================
setInterval(()=>{
let inc = 0;
state.assets.forEach(i=>inc+=assets[i].income);
if(inc>0){
state.money += inc;
log("üìà –ü–∞—Å—Å–∏–≤ +" + inc + " ‚Ç¥");
update();
}
},60000);

// ================== RENDER ==================
function render(){
schemeList.innerHTML='';
schemes.forEach((s,i)=>{
schemeList.innerHTML+=`
<div class="card">
<b>${s.name}</b><br>
<span class="small">–†–∏—Å–∫ ${Math.floor(s.risk*100)}%</span><br>
<button onclick="runScheme(${i})">–ö—Ä—É—Ç–∏—Ç—å</button>
</div>`;
});

foodList.innerHTML='';
food.forEach((f,i)=>{
foodList.innerHTML+=`
<div class="card">
<b>${f.name}</b><br>
<span class="small">${f.cost} ‚Ç¥ | +${f.energy}%</span><br>
<button onclick="eat(${i})">–ö—É–ø–∏—Ç—å</button>
</div>`;
});

assetList.innerHTML='';
assets.forEach((a,i)=>{
assetList.innerHTML+=`
<div class="card">
<b>${a.name}</b><br>
<span class="small">${a.cost} ‚Ç¥ | +${a.income}/–º–∏–Ω</span><br>
<button onclick="buyAsset(${i})" ${state.assets.includes(i)?'disabled':''}>
${state.assets.includes(i)?'–ï—Å—Ç—å':'–ö—É–ø–∏—Ç—å'}
</button>
</div>`;
});
}

// ================== TABS ==================
function openTab(n){
['work','food','assets'].forEach(t=>{
document.getElementById('tab-'+t).style.display = t===n?'block':'none';
});
}

// ================== ENERGY REGEN ==================
setInterval(()=>{
if(state.energy<100){
state.energy+=0.3;
update();
}
},4000);

update();
</script>

</body>
</html>
