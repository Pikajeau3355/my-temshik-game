<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>UA Temshik Elite</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;500;700;800&display=swap');
        
        :root {
            --primary: #5d5fef; --accent: #a5a6f6; --gold: #ffcf52;
            --bg: #0b0c10; --card-bg: #1c1d26;
            --success: #4ade80; --danger: #f87171;
            --energy-color: #00f2ff;
        }

        body {
            margin: 0; background: var(--bg); color: #ffffff;
            font-family: 'Manrope', sans-serif; overflow: hidden;
            height: 100vh; display: flex; flex-direction: column;
        }

        .profile-header {
            padding: 50px 20px 20px;
            background: linear-gradient(180deg, rgba(93, 95, 239, 0.1) 0%, rgba(11, 12, 16, 0) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .user-info { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .avatar { 
            width: 45px; height: 45px; background: var(--primary); 
            border-radius: 15px; display: flex; align-items: center; 
            justify-content: center; font-size: 20px; font-weight: 800;
            box-shadow: 0 4px 15px rgba(93, 95, 239, 0.4);
        }
        .user-text h2 { margin: 0; font-size: 16px; font-weight: 800; }
        .user-text p { margin: 2px 0 0; font-size: 11px; color: var(--accent); font-weight: 600; text-transform: uppercase; }

        .balance-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 24px; padding: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            text-align: center; margin-bottom: 10px;
        }
        .bal-label { font-size: 11px; color: #828282; font-weight: 700; letter-spacing: 1px; margin-bottom: 5px; }
        .bal-amount { font-size: 34px; font-weight: 800; letter-spacing: -1px; }
        .bal-amount span { color: var(--gold); }

        .energy-section { margin-top: 15px; }
        .energy-header { display: flex; justify-content: space-between; font-size: 11px; font-weight: 800; margin-bottom: 6px; }
        .energy-bar-outer { 
            width: 100%; height: 10px; background: rgba(255,255,255,0.05); 
            border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05);
        }
        .energy-bar-inner { 
            height: 100%; background: linear-gradient(90deg, var(--energy-color), var(--primary)); 
            width: 100%; transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .viewport { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 120px; }
        .tab { display: none; }
        .tab.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .section-title { font-size: 13px; font-weight: 800; color: #666; margin: 25px 0 15px; text-transform: uppercase; letter-spacing: 1.5px; }

        .card {
            background: var(--card-bg); border-radius: 22px; padding: 18px;
            margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: center;
        }
        .card-info h3 { margin: 0; font-size: 15px; font-weight: 700; }
        .card-info p { margin: 4px 0 0; font-size: 12px; color: #828282; }

        .btn {
            background: var(--primary); color: white; border: none; padding: 12px 18px;
            border-radius: 14px; font-weight: 700; font-size: 13px; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        .btn:disabled { background: #25262b; color: #555; opacity: 0.5; }

        .nav {
            position: fixed; bottom: 25px; left: 20px; right: 20px;
            background: rgba(28, 29, 38, 0.95); backdrop-filter: blur(15px);
            border-radius: 24px; height: 75px; display: flex;
            justify-content: space-around; align-items: center;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; font-size: 10px; font-weight: 700; transition: 0.3s; }
        .nav-item.active { color: var(--primary); }
        .nav-icon { font-size: 22px; margin-bottom: 4px; }

        .log { background: rgba(0,0,0,0.2); border-radius: 18px; padding: 15px; font-size: 11px; height: 100px; overflow-y: auto; }
        .log-item { margin-bottom: 6px; padding-left: 10px; border-left: 2px solid var(--primary); color: #ccc; }
        
        canvas { width: 100% !important; height: 100px !important; }
    </style>
</head>
<body>

    <div class="profile-header">
        <div class="user-info">
            <div class="avatar" id="user-avatar">–¢</div>
            <div class="user-text">
                <h2 id="user-name">–¢–µ–º—â–∏–∫</h2>
                <p id="user-rank">–ï–ª—ñ—Ç–Ω–∏–π –£—á–∞—Å–Ω–∏–∫</p>
            </div>
        </div>
        <div class="balance-card">
            <div class="bal-label">–ö–ê–ü–Ü–¢–ê–õ</div>
            <div class="bal-amount" id="balance">0<span>‚Ç¥</span></div>
            <div class="energy-section">
                <div class="energy-header"><span>–†–ï–°–£–†–° –ï–ù–ï–†–ì–Ü–á</span><span id="energy-val">100%</span></div>
                <div class="energy-bar-outer"><div class="energy-bar-inner" id="energy-bar"></div></div>
            </div>
        </div>
    </div>

    <div class="viewport">
        <div id="tab-work" class="tab active">
            <div class="section-title">üöÄ –ê–∫—Ç—É–∞–ª—å–Ω—ñ —Ç–µ–º–∫–∏</div>
            <div id="temki-list"></div>
            <div class="section-title">üçï –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Å–∏–ª–∏</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div class="card" style="flex-direction:column; align-items:flex-start;">
                    <div class="card-info"><h3>‚òïÔ∏è –ï—Å–ø—Ä–µ—Å–æ</h3><p>50 ‚Ç¥ | +20‚ö°</p></div>
                    <button class="btn" style="width:100%; margin-top:10px;" onclick="eat(50, 20)">–í–∏–ø–∏—Ç–∏</button>
                </div>
                <div class="card" style="flex-direction:column; align-items:flex-start;">
                    <div class="card-info"><h3>üåØ –®–∞—É—Ä–º–∞</h3><p>150 ‚Ç¥ | +60‚ö°</p></div>
                    <button class="btn" style="width:100%; margin-top:10px;" onclick="eat(150, 60)">–ó'—ó—Å—Ç–∏</button>
                </div>
            </div>
            <div class="section-title">üìë –ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü—ñ–π</div>
            <div class="log" id="terminal"></div>
        </div>

        <div id="tab-crypto" class="tab">
            <div class="section-title">üìà –†–∏–Ω–æ–∫ Bitcoin</div>
            <div class="balance-card" style="background: var(--card-bg);">
                <div id="btc-price" style="font-size:26px; font-weight:800; color:var(--success);">‚Ç¥ 3,800,000</div>
                <canvas id="cryptoChart"></canvas>
            </div>
            <div class="card">
                <div class="card-info"><h3>–ú—ñ–π –≥–∞–º–∞–Ω–µ—Ü—å</h3><p id="my-btc">0 BTC</p></div>
                <button class="btn" style="background:var(--gold); color:#000" onclick="tradeBtc('all_buy')">–ù–∞ –≤—Å—ñ ‚Ç¥</button>
            </div>
            <button class="btn" style="width:100%; background:#fff; color:#000" onclick="tradeBtc('all_sell')">–ü–†–û–î–ê–¢–ò –í–ï–°–¨ BTC</button>
        </div>

        <div id="tab-shop" class="tab">
            <div class="section-title">üíé –¢–≤–æ—î –º–∞–π–Ω–æ</div>
            <div id="shop-list"></div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="showTab('work', this)">
            <span class="nav-icon">üí∏</span><span class="nav-label">–¢–µ–º–∫–∏</span>
        </div>
        <div class="nav-item" onclick="showTab('crypto', this)">
            <span class="nav-icon">üìä</span><span class="nav-label">–ë—ñ—Ä–∂–∞</span>
        </div>
        <div class="nav-item" onclick="showTab('shop', this)">
            <span class="nav-icon">üèéÔ∏è</span><span class="nav-label">–ê–∫—Ç–∏–≤–∏</span>
        </div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const user = tg.initDataUnsafe?.user;
        if(user) {
            document.getElementById('user-name').textContent = user.first_name;
            document.getElementById('user-avatar').textContent = user.first_name.charAt(0).toUpperCase();
        }

        let money = Number(localStorage.getItem('money')) || 1000;
        let btcCount = Number(localStorage.getItem('btcCount')) || 0;
        let energy = Number(localStorage.getItem('energy')) || 100;
        let btcPrice = 3800000;
        let priceHistory = [3800000, 3750000, 3820000, 3790000, 3810000];

        const temki = [
            { id: 1, name: "–î—Ä–æ–ø –Ω–∞ –ü—Ä–æ–º", cost: 200, min: 30, max: 180, energy: 15 },
            { id: 2, name: "–ü–µ—Ä–µ–ø—Ä–æ–¥–∞–∂ iPhone", cost: 15000, min: 1200, max: 5500, energy: 30 },
            { id: 3, name: "–ö—Ä–∏–ø—Ç–æ-–∞—Ä–±—ñ—Ç—Ä–∞–∂", cost: 50000, min: -2000, max: 15000, energy: 45 }
        ];

        function save() {
            localStorage.setItem('money', money);
            localStorage.setItem('btcCount', btcCount);
            localStorage.setItem('energy', energy);
        }

        function drawChart() {
            const canvas = document.getElementById('cryptoChart');
            if (!canvas || document.getElementById('tab-crypto').style.display === 'none') return;
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const min = Math.min(...priceHistory);
            const max = Math.max(...priceHistory);
            const range = max - min || 1;

            ctx.beginPath();
            ctx.strokeStyle = '#4ade80';
            ctx.lineWidth = 3;
            ctx.lineJoin = 'round';

            priceHistory.forEach((p, i) => {
                const x = (i / (priceHistory.length - 1)) * canvas.width;
                const y = canvas.height - ((p - min) / range) * (canvas.height - 20) - 10;
                if(i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }

        function updateUI() {
            document.getElementById('balance').innerHTML = Math.floor(money).toLocaleString() + '<span>‚Ç¥</span>';
            document.getElementById('my-btc').textContent = btcCount.toFixed(6) + ' BTC';
            document.getElementById('energy-val').textContent = Math.floor(energy) + '%';
            document.getElementById('energy-bar').style.width = energy + '%';

            const tList = document.getElementById('temki-list');
            tList.innerHTML = '';
            temki.forEach(t => {
                tList.innerHTML += `<div class="card">
                    <div class="card-info"><h3>${t.name}</h3><p>${t.cost.toLocaleString()} ‚Ç¥ | -${t.energy}‚ö°</p></div>
                    <button class="btn" onclick="work(${t.id})" ${(money < t.cost || energy < t.energy) ? 'disabled' : ''}>–í–æ—Ä–≤–∞—Ç–∏—Å—å</button>
                </div>`;
            });
            save();
            drawChart();
        }

        function work(id) {
            const t = temki.find(x => x.id === id);
            if(energy < t.energy) return;
            energy -= t.energy;
            money -= t.cost;
            let profit = Math.floor(Math.random() * (t.max - t.min + 1)) + t.min;
            money += (t.cost + profit);
            addLog(profit >= 0 ? `+${profit} ‚Ç¥: –£—Å–ø—ñ—Ö` : `${profit} ‚Ç¥: –ú—ñ–Ω—É—Å`, profit >= 0 ? 'var(--success)' : 'var(--danger)');
            tg.HapticFeedback.impactOccurred('medium');
            updateUI();
        }

        function tradeBtc(type) {
            if(type === 'all_buy' && money > 0) {
                btcCount += money / btcPrice;
                money = 0;
                addLog("–ö—É–ø–ª–µ–Ω–æ BTC –Ω–∞ –≤–µ—Å—å –∫–∞–ø—ñ—Ç–∞–ª", "var(--gold)");
            } else if(type === 'all_sell' && btcCount > 0) {
                let gain = btcCount * btcPrice;
                money += gain;
                btcCount = 0;
                addLog(`–ü—Ä–æ–¥–∞–Ω–æ BTC: +${Math.floor(gain)} ‚Ç¥`, "#fff");
            }
            tg.HapticFeedback.impactOccurred('heavy');
            updateUI();
        }

        function eat(cost, val) {
            if(money >= cost && energy < 100) {
                money -= cost;
                energy = Math.min(100, energy + val);
                updateUI();
            }
        }

        function showTab(name, el) {
            document.querySelectorAll('.tab').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('tab-' + name).style.display = 'block';
            el.classList.add('active');
            if(name === 'crypto') setTimeout(drawChart, 50);
        }

        function addLog(msg, col) {
            const l = document.getElementById('terminal');
            l.insertAdjacentHTML('afterbegin', `<div class="log-item" style="border-left-color:${col}">${msg}</div>`);
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–Ω–∏ –ë—ñ—Ä–∂—ñ
        setInterval(() => {
            let change = (Math.random() - 0.5) * 40000;
            btcPrice += change;
            priceHistory.push(btcPrice);
            if(priceHistory.length > 20) priceHistory.shift();
            
            const btcEl = document.getElementById('btc-price');
            if(btcEl) {
                btcEl.textContent = '‚Ç¥ ' + Math.floor(btcPrice).toLocaleString();
                btcEl.style.color = change > 0 ? 'var(--success)' : 'var(--danger)';
            }
            drawChart();
        }, 4000);

        setInterval(() => { if(energy < 100) { energy = Math.min(100, energy + 0.3); updateUI(); } }, 5000);

        // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∑–∞–ø—É—Å–∫
        document.getElementById('tab-work').style.display = 'block';
        updateUI();
    </script>
</body>
</html>
