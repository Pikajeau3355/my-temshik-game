<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>UA Temshik Elite</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;500;700;800&display=swap');
        
        :root {
            --primary: #5d5fef; --accent: #a5a6f6; --gold: #ffcf52;
            --bg: #0b0c10; --card-bg: #1c1d26;
            --success: #4ade80; --danger: #f87171;
            --energy-color: #00f2ff;
        }

        body {
            margin: 0; background: var(--bg); color: #ffffff;
            font-family: 'Manrope', sans-serif; overflow: hidden;
            height: 100vh; display: flex; flex-direction: column;
        }

        /* –ù–æ–≤–∏–π –•–µ–¥–µ—Ä */
        .profile-header {
            padding: 50px 20px 20px;
            background: linear-gradient(180deg, rgba(93, 95, 239, 0.1) 0%, rgba(11, 12, 16, 0) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .user-info { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .avatar { 
            width: 45px; height: 45px; background: var(--primary); 
            border-radius: 15px; display: flex; align-items: center; 
            justify-content: center; font-size: 20px; font-weight: 800;
            box-shadow: 0 4px 15px rgba(93, 95, 239, 0.4);
        }
        .user-text h2 { margin: 0; font-size: 16px; font-weight: 800; }
        .user-text p { margin: 2px 0 0; font-size: 11px; color: var(--accent); font-weight: 600; text-transform: uppercase; }

        /* –ö–∞—Ä—Ç–∫–∞ –ë–∞–ª–∞–Ω—Å—É */
        .balance-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 24px; padding: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            text-align: center; margin-bottom: 10px;
        }
        .bal-label { font-size: 11px; color: #828282; font-weight: 700; letter-spacing: 1px; margin-bottom: 5px; }
        .bal-amount { font-size: 34px; font-weight: 800; letter-spacing: -1px; }
        .bal-amount span { color: var(--gold); }

        /* –û–Ω–æ–≤–ª–µ–Ω–∞ –ï–Ω–µ—Ä–≥—ñ—è */
        .energy-section { margin-top: 15px; }
        .energy-header { display: flex; justify-content: space-between; font-size: 11px; font-weight: 800; margin-bottom: 6px; }
        .energy-bar-outer { 
            width: 100%; height: 8px; background: rgba(255,255,255,0.05); 
            border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05);
        }
        .energy-bar-inner { 
            height: 100%; background: linear-gradient(90deg, var(--energy-color), #5d5fef); 
            width: 100%; transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }

        .viewport { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 120px; }
        .tab { display: none; animation: slideUp 0.3s ease-out; }
        .tab.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .section-title { font-size: 14px; font-weight: 800; color: #828282; margin: 25px 0 15px; text-transform: uppercase; letter-spacing: 1px; }

        .card {
            background: var(--card-bg); border-radius: 20px; padding: 18px;
            margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: center;
        }
        .card-info h3 { margin: 0; font-size: 15px; font-weight: 700; }
        .card-info p { margin: 4px 0 0; font-size: 12px; color: #828282; }

        .btn {
            background: var(--primary); color: white; border: none; padding: 12px 18px;
            border-radius: 14px; font-weight: 700; font-size: 13px; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        .btn:disabled { background: #25262b; color: #555; opacity: 0.5; }

        .nav {
            position: fixed; bottom: 25px; left: 20px; right: 20px;
            background: rgba(28, 29, 38, 0.95); backdrop-filter: blur(15px);
            border-radius: 24px; height: 75px; display: flex;
            justify-content: space-around; align-items: center;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; font-size: 10px; font-weight: 700; transition: 0.3s; }
        .nav-item.active { color: var(--primary); }
        .nav-icon { font-size: 22px; margin-bottom: 4px; }

        .log { background: rgba(0,0,0,0.2); border-radius: 18px; padding: 15px; font-size: 11px; height: 100px; overflow-y: auto; }
        .log-item { margin-bottom: 6px; padding-left: 10px; border-left: 2px solid var(--primary); color: #ccc; }
    </style>
</head>
<body>

    <div class="profile-header">
        <div class="user-info">
            <div class="avatar" id="user-avatar">?</div>
            <div class="user-text">
                <h2 id="user-name">–¢–µ–º—â–∏–∫</h2>
                <p id="user-rank">Elite Member</p>
            </div>
        </div>

        <div class="balance-card">
            <div class="bal-label">–ü–†–ò–ë–£–¢–û–ö –ó–ê –ß–ê–°</div>
            <div class="bal-amount" id="balance">0<span>‚Ç¥</span></div>
            
            <div class="energy-section">
                <div class="energy-header">
                    <span>–ï–ù–ï–†–ì–Ü–Ø</span>
                    <span id="energy-val">100%</span>
                </div>
                <div class="energy-bar-outer">
                    <div class="energy-bar-inner" id="energy-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="viewport">
        <div id="tab-work" class="tab active">
            <div class="section-title">‚ö°Ô∏è –î–æ—Å—Ç—É–ø–Ω—ñ —Å—Ö–µ–º–∏</div>
            <div id="temki-list"></div>
            
            <div class="section-title">üçï –í—ñ–¥–ø–æ—á–∏–Ω–æ–∫</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div class="card" style="flex-direction:column; align-items:flex-start;">
                    <div class="card-info"><h3>‚òïÔ∏è Espresso</h3><p>50 ‚Ç¥ | +20‚ö°</p></div>
                    <button class="btn" style="width:100%; margin-top:10px;" onclick="eat(50, 20)">–ü–∏—Ç–∏</button>
                </div>
                <div class="card" style="flex-direction:column; align-items:flex-start;">
                    <div class="card-info"><h3>üåØ Doner</h3><p>150 ‚Ç¥ | +60‚ö°</p></div>
                    <button class="btn" style="width:100%; margin-top:10px;" onclick="eat(150, 60)">–á—Å—Ç–∏</button>
                </div>
            </div>

            <div class="section-title">üìë –ñ—É—Ä–Ω–∞–ª</div>
            <div class="log" id="terminal"></div>
        </div>

        <div id="tab-crypto" class="tab">
            <div class="section-title">üìà –†–∏–Ω–æ–∫ BTC</div>
            <div class="balance-card" style="background: var(--card-bg);">
                <div id="btc-price" style="font-size:26px; font-weight:800; color:var(--success);">‚Ç¥ 2,800,000</div>
                <canvas id="cryptoChart" style="width:100%; height:100px; margin-top:15px;"></canvas>
            </div>
            <div class="card">
                <div class="card-info"><h3>–¢–≤—ñ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å</h3><p id="my-btc">0 BTC</p></div>
                <button class="btn" style="background:var(--gold); color:#000" onclick="tradeBtc('all_buy')">–ù–∞ –≤—Å—ñ</button>
            </div>
            <button class="btn" style="width:100%; background:#fff; color:#000" onclick="tradeBtc('all_sell')">–ü–†–û–î–ê–¢–ò –í–°–ï</button>
        </div>

        <div id="tab-shop" class="tab">
            <div class="section-title">üíé –¢–≤–æ—î –º–∞–π–Ω–æ</div>
            <div id="shop-list"></div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="showTab('work', this)">
            <span class="nav-icon">üí∏</span><span class="nav-label">–°—Ö–µ–º–∏</span>
        </div>
        <div class="nav-item" onclick="showTab('crypto', this)">
            <span class="nav-icon">üìä</span><span class="nav-label">–ë—ñ—Ä–∂–∞</span>
        </div>
        <div class="nav-item" onclick="showTab('shop', this)">
            <span class="nav-icon">üèéÔ∏è</span><span class="nav-label">–ê–∫—Ç–∏–≤–∏</span>
        </div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —é–∑–µ—Ä–∞
        const user = tg.initDataUnsafe?.user;
        if(user) {
            document.getElementById('user-name').textContent = user.first_name;
            document.getElementById('user-avatar').textContent = user.first_name.charAt(0);
        }

        let money = Number(localStorage.getItem('money')) || 1000;
        let btcCount = Number(localStorage.getItem('btcCount')) || 0;
        let energy = Number(localStorage.getItem('energy')) || 100;
        let btcPrice = 2850000;
        let priceHistory = [2850000, 2800000, 2870000, 2840000];

        const temki = [
            { id: 1, name: "–î—Ä–æ–ø –Ω–∞ –ü—Ä–æ–º", cost: 200, min: 30, max: 180, energy: 15 },
            { id: 2, name: "–ü–µ—Ä–µ–ø—Ä–æ–¥–∞–∂ iPhone", cost: 15000, min: 1200, max: 5500, energy: 30 },
            { id: 3, name: "–ö—Ä–∏–ø—Ç–æ-–∞—Ä–±—ñ—Ç—Ä–∞–∂", cost: 50000, min: -2000, max: 15000, energy: 45 }
        ];

        function save() {
            localStorage.setItem('money', money);
            localStorage.setItem('btcCount', btcCount);
            localStorage.setItem('energy', energy);
        }

        function updateUI() {
            document.getElementById('balance').innerHTML = Math.floor(money).toLocaleString() + '<span>‚Ç¥</span>';
            document.getElementById('my-btc').textContent = btcCount.toFixed(6) + ' BTC';
            document.getElementById('energy-val').textContent = Math.floor(energy) + '%';
            document.getElementById('energy-bar').style.width = energy + '%';

            const tList = document.getElementById('temki-list');
            tList.innerHTML = '';
            temki.forEach(t => {
                tList.innerHTML += `<div class="card">
                    <div class="card-info"><h3>${t.name}</h3><p>${t.cost.toLocaleString()} ‚Ç¥ | -${t.energy}‚ö°</p></div>
                    <button class="btn" onclick="work(${t.id})" ${(money < t.cost || energy < t.energy) ? 'disabled' : ''}>–í–æ—Ä–≤–∞—Ç–∏—Å—å</button>
                </div>`;
            });
            save();
        }

        function work(id) {
            const t = temki.find(x => x.id === id);
            if(energy < t.energy) return;
            energy -= t.energy;
            money -= t.cost;
            let profit = Math.floor(Math.random() * (t.max - t.min + 1)) + t.min;
            money += (t.cost + profit);
            addLog(profit >= 0 ? `+${profit} ‚Ç¥: —É—Å–ø—ñ—à–Ω–∞ —Ç–µ–º–∫–∞` : `${profit} ‚Ç¥: –Ω–µ–≤–¥–∞—á–∞`, profit >= 0 ? 'var(--success)' : 'var(--danger)');
            tg.HapticFeedback.impactOccurred('medium');
            updateUI();
        }

        function eat(cost, val) {
            if(money >= cost && energy < 100) {
                money -= cost;
                energy = Math.min(100, energy + val);
                tg.HapticFeedback.notificationOccurred('success');
                updateUI();
            }
        }

        function tradeBtc(type) {
            if(type === 'all_buy' && money > 0) {
                btcCount += money / btcPrice; money = 0;
            } else if(type === 'all_sell' && btcCount > 0) {
                money += btcCount * btcPrice; btcCount = 0;
            }
            tg.HapticFeedback.impactOccurred('heavy');
            updateUI();
        }

        function showTab(name, el) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('tab-' + name).classList.add('active');
            el.classList.add('active');
        }

        function addLog(msg, col) {
            const l = document.getElementById('terminal');
            l.insertAdjacentHTML('afterbegin', `<div class="log-item" style="border-left-color:${col}">${msg}</div>`);
        }

        // –ê–≤—Ç–æ-–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
        setInterval(() => { if(energy < 100) { energy = Math.min(100, energy + 1); updateUI(); } }, 6000);

        updateUI();
    </script>
</body>
</html>
